# KOTIK AI - RAG-–±–æ—Ç –¥–ª—è —Ç—É—Ä–∏—Å—Ç–æ–≤

## ‚ö†Ô∏è –°–¢–ê–¢–£–°: –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï - –ü–û–õ–ù–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ë–î

**–î–∞—Ç–∞:** 26 –∞–≤–≥—É—Å—Ç–∞ 2025  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô

### üîß **–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –í–´–ü–û–õ–ù–ï–ù–û:**
–ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã –±—ã–ª–∞ **–Ω–µ–ø–æ–ª–Ω–æ–π** –∏ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª–∞ –∫–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã.

### ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´:**
1. **‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏** ‚Üí ‚úÖ `card_type` + `entity_type` –¥–æ–±–∞–≤–ª–µ–Ω—ã
2. **‚ùå –ù–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤** ‚Üí ‚úÖ `source_thread_ids` + `raw_data_payload`
3. **‚ùå –ù–µ—Ç –≥–∏–±–∫–æ—Å—Ç–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π** ‚Üí ‚úÖ `extra_data` –¥–ª—è –±—É–¥—É—â–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π
4. **‚ùå –ù–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–º** ‚Üí ‚úÖ `batch_id`, `moderator_id`, `processing_version`

### üéØ **–ù–û–í–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê "–ï–î–ò–ù–´–ô –¶–ï–ù–¢–† –ó–ù–ê–ù–ò–ô":**

#### **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã –∫–∞—Ä—Ç–æ—á–µ–∫:**
```sql
card_type CHECK (card_type IN ('chat_summary', 'entity_profile', 'live_data_provider'))
```

- **`chat_summary`** - —Å–∞–º–º–∞—Ä–∏ –¥–∏–∞–ª–æ–≥–æ–≤ (–æ—Å–Ω–æ–≤–∞)
- **`entity_profile`** - –ø—Ä–æ—Ñ–∏–ª–∏ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤/–æ—Ç–µ–ª–µ–π/–ø–ª—è–∂–µ–π  
- **`live_data_provider`** - –∂–∏–≤—ã–µ –¥–∞–Ω–Ω—ã–µ (–±—É–¥—É—â–µ–µ)

#### **–ì–∏–±–∫–æ—Å—Ç—å —á–µ—Ä–µ–∑ entity_type:**
```javascript
// –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
{entity_type: 'restaurant'} // –¥–ª—è —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤
{entity_type: 'hotel'}      // –¥–ª—è –æ—Ç–µ–ª–µ–π  
{entity_type: 'transport'}  // –¥–ª—è —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞
{entity_type: null}         // –¥–ª—è –æ–±—â–∏—Ö —Å—Ç–∞—Ç–µ–π
```

### üõ†Ô∏è **–ü–û–õ–ù–ê–Ø –°–¢–†–£–ö–¢–£–†–ê –¢–ê–ë–õ–ò–¶–´ (–í–ï–†–°–ò–Ø 2.4):**

```sql
CREATE TABLE public.golden_knowledge_cards (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  
  -- –ì–µ–æ–≥—Ä–∞—Ñ–∏—è
  country text NOT NULL,
  city text NOT NULL,
  
  -- –ö–õ–Æ–ß–ï–í–ê–Ø –¢–ò–ü–ò–ó–ê–¶–ò–Ø
  card_type text NOT NULL CHECK (card_type IN ('chat_summary', 'entity_profile', 'live_data_provider')),
  entity_type text,
  
  -- –ö–æ–Ω—Ç–µ–Ω—Ç
  title text NOT NULL,
  summary text,
  structured_data jsonb,
  links jsonb,
  tags text[],
  extra_data jsonb, -- –í–û–õ–®–ï–ë–ù–ê–Ø –Ø–ß–ï–ô–ö–ê
  
  -- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
  status text NOT NULL DEFAULT 'draft',
  batch_id uuid,
  processing_version text,
  moderator_id uuid,
  
  -- –ò—Å—Ç–æ—á–Ω–∏–∫–∏
  source_thread_ids text[], -- –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!
  raw_data_payload jsonb,   -- –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!
  
  -- –ü–æ–∏—Å–∫
  vector vector(1536),
  
  -- –°–∏—Å—Ç–µ–º–∞
  created_at timestamptz DEFAULT now(),
  updated_at timestamptz DEFAULT now()
);
```

### üöÄ **–û–ë–ù–û–í–õ–ï–ù–ù–´–ô –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô:**

#### **–ü–†–ò–û–†–ò–¢–ï–¢ 1: –°–û–ó–î–ê–ù–ò–ï –ü–†–ê–í–ò–õ–¨–ù–û–ô –ë–î**
- [ ] –í—ã–ø–æ–ª–Ω–∏—Ç—å **–ü–û–õ–ù–´–ô SQL** –∏–∑ `GOLDEN_KNOWLEDGE_PLAN.md`
- [ ] –°–æ–∑–¥–∞—Ç—å –≤—Å–µ –∏–Ω–¥–µ–∫—Å—ã –∏ —Ç—Ä–∏–≥–≥–µ—Ä—ã
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å RLS –ø–æ–ª–∏—Ç–∏–∫–∏

#### **–ü–†–ò–û–†–ò–¢–ï–¢ 2: –¢–ò–ü–ò–ó–ò–†–û–í–ê–ù–ù–´–ô –°–ö–†–ò–ü–¢**
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `knowledge-base-compiler.js` —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ç–∏–ø–æ–≤
- [ ] –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É `source_thread_ids` –∏ `raw_data_payload`
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å `batch_id` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

#### **–ü–†–ò–û–†–ò–¢–ï–¢ 3: –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –¢–ò–ü–û–í**
- [ ] –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–∏—Å–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ —Ç–∏–ø–∞–º
- [ ] –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É `extra_data`

### üéØ **–ü–†–ò–ú–ï–†–´ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø –¢–ò–ü–ò–ó–ê–¶–ò–ò:**

#### **Chat Summary (–æ—Å–Ω–æ–≤–Ω–∞—è –º–∞—Å—Å–∞):**
```javascript
{
  card_type: 'chat_summary',
  entity_type: null,
  title: '–¢—Ä–∞–Ω—Å—Ñ–µ—Ä –∏–∑ –ê–Ω—Ç–∞–ª–∏–∏ –≤ –ö–∞—à - –≤—Å–µ —Å–ø–æ—Å–æ–±—ã',
  summary: '–ü–æ–¥—Ä–æ–±–Ω–∞—è —Å—Ç–∞—Ç—å—è...',
  source_thread_ids: ['thread_123', 'thread_456']
}
```

#### **Entity Profile (–ø—Ä–æ—Ñ–∏–ª–∏ –∑–∞–≤–µ–¥–µ–Ω–∏–π):**
```javascript
{
  card_type: 'entity_profile', 
  entity_type: 'restaurant',
  title: 'Zaika Marina - –∏–Ω–¥–∏–π—Å–∫–∏–π —Ä–µ—Å—Ç–æ—Ä–∞–Ω',
  structured_data: {
    phone: '+90 242 836 1234',
    cuisine: 'Indian',
    rating: 4.5
  }
}
```

#### **Live Data Provider (–±—É–¥—É—â–µ–µ):**
```javascript
{
  card_type: 'live_data_provider',
  entity_type: 'bus_schedule',
  extra_data: {
    api_endpoint: 'https://bus-api.com/schedule',
    refresh_interval: 3600
  }
}
```

### üîÆ **–ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê –ò–°–ü–†–ê–í–õ–ï–ù–ù–û–ô –°–ò–°–¢–ï–ú–´:**

‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å:** –û–¥–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞, –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ç–∏–ø–æ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç–∞  
‚úÖ **–û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º–æ—Å—Ç—å:** –°–≤—è–∑—å —Å –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ –¥–ª—è –ø–µ—Ä–µ–æ–±—Ä–∞–±–æ—Ç–∫–∏  
‚úÖ **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å:** `extra_data` –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π  
‚úÖ **–£–ø—Ä–∞–≤–ª—è–µ–º–æ—Å—Ç—å:** –ë–∞—Ç—á–∏, –≤–µ—Ä—Å–∏–∏, –º–æ–¥–µ—Ä–∞—Ü–∏—è  
‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:** –ì–µ–æ–≥—Ä–∞—Ñ–∏—è + —Ç–∏–ø–∏–∑–∞—Ü–∏—è  

### üìÖ **–û–ë–ù–û–í–õ–ï–ù–ù–´–ô TIMELINE:**

**–ù–µ–¥–µ–ª—è 1:** –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–π –ë–î + —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç  
**–ù–µ–¥–µ–ª—è 2:** –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–æ–ø-20 —Ç–µ–º —Å —Ä–∞–∑–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏  
**–ù–µ–¥–µ–ª—è 3:** –í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è + –ø–æ–∏—Å–∫ –ø–æ —Ç–∏–ø–∞–º  
**–ù–µ–¥–µ–ª—è 4:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–æ—Ç–æ–º + –ø—Ä–æ–¥–∞–∫—à–µ–Ω  

### üéØ **–°–õ–ï–î–£–Æ–©–ò–ï –î–ï–ô–°–¢–í–ò–Ø:**

**–ù–ï–ú–ï–î–õ–ï–ù–ù–û:** –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É –ø–æ **–ø–æ–ª–Ω–æ–π —Å—Ö–µ–º–µ 2.4**  
**–ó–ê–¢–ï–ú:** –û–±–Ω–æ–≤–∏—Ç—å —Å–∫—Ä–∏–ø—Ç —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–∏  
**–ü–†–û–í–ï–†–ò–¢–¨:** –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤  

---

**üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î! –ë–∞–∑–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã.

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û - –ì–æ—Ç–æ–≤ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å –ø–æ–ª–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π  
**–ê–≤—Ç–æ—Ä:** Claude Sonnet 4 + –°–∞–ª–∏–º–æ–≤ –°.–§.