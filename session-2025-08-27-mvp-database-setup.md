# –°–ï–°–°–ò–Ø: MVP –ë–ê–ó–ê –ó–ù–ê–ù–ò–ô - –°–û–ó–î–ê–ù–ò–ï –ò –ó–ê–ì–†–£–ó–ö–ê –î–ê–ù–ù–´–•

**–î–∞—Ç–∞:** 27 –∞–≤–≥—É—Å—Ç–∞ 2025  
**–ó–∞–¥–∞—á–∞:** –°–æ–∑–¥–∞–Ω–∏–µ PostgreSQL —Å—Ö–µ–º—ã –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤

## üéØ **–í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ó–ê–î–ê–ù–ò–Ø:**

### ‚úÖ **–ó–∞–¥–∞—á–∞ ‚Ññ1: SQL –°—Ö–µ–º–∞ –ë–∞–∑–∞ –î–∞–Ω–Ω—ã—Ö**
- **–°–æ–∑–¥–∞–Ω:** `schema.sql` —Å —Ç—Ä–µ–º—è –æ—Å–Ω–æ–≤–Ω—ã–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** MVP –ø–æ–¥—Ö–æ–¥ —Å –≥–∏–±–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
- **–†–∞—Å—à–∏—Ä–µ–Ω–∏—è:** PostGIS –¥–ª—è –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏, JSONB –¥–ª—è –≥–∏–±–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö

### ‚úÖ **–ó–∞–¥–∞—á–∞ ‚Ññ2: Python –°–∫—Ä–∏–ø—Ç –ó–∞–≥—Ä—É–∑–∫–∏**  
- **–°–æ–∑–¥–∞–Ω:** `load_to_db.py` —Å UPSERT –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏
- **–§—É–Ω–∫—Ü–∏–∏:** –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–∑—ã–≤–æ–≤, –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–û–±—Ä–∞–±–æ—Ç–∫–∞:** –ü–∞—Ä—Å–∏–Ω–≥ –¥–∞—Ç, –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–≥–æ–≤, –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ JSONB

## üóÑÔ∏è **–°–¢–†–£–ö–¢–£–†–ê –ë–ê–ó–´ –î–ê–ù–ù–´–• MVP:**

### **1. –¢–∞–±–ª–∏—Ü–∞ `entities` (–û—Å–Ω–æ–≤–Ω–∞—è)**
```sql
- id (SERIAL PRIMARY KEY)
- google_place_id (UNIQUE) -- –î–ª—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏
- entity_type ('restaurant', 'hotel', 'guide')
- title, address, location (PostGIS Geography)
- contacts (JSONB) -- phone, website, whatsapp_link
- rating_overall, reviews_count
- details (JSONB) -- "–ú–∞–≥–∏—á–µ—Å–∫–∞—è —è—á–µ–π–∫–∞" –¥–ª—è —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- summary_main (AI –æ–ø–∏—Å–∞–Ω–∏–µ ~1000 —Å–∏–º–≤–æ–ª–æ–≤)
- summary_reviews (AI —Å–∞–º–º–∞—Ä–∏ –æ—Ç–∑—ã–≤–æ–≤)
- tags (TEXT[]) -- –¥–ª—è –ø–æ–∏—Å–∫–∞
- version, created_at, updated_at
```

### **2. –¢–∞–±–ª–∏—Ü–∞ `reviews`**
```sql
- id, entity_id (FK)
- review_text, rating (1-5)
- review_date, original_language
- review_context (JSONB)
- source ('google')
```

### **3. –¢–∞–±–ª–∏—Ü–∞ `entity_connections`**
```sql  
- id, entity_from_id (FK), entity_to_id (FK)
- connection_type ('nearby', 'mentioned_in', 'similar')
- connection_strength (0.00-1.00)
- created_at
```

## üöÄ **–ì–û–¢–û–í–´–ï –°–ö–†–ò–ü–¢–´:**

### **schema.sql**
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
- ‚úÖ PostGIS —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ
- ‚úÖ –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### **load_to_db.py**
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase PostgreSQL
- ‚úÖ –ß—Ç–µ–Ω–∏–µ `restaurants_final_structured_extended.json`
- ‚úÖ UPSERT –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- ‚úÖ Batch –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

## üìä **–î–ê–ù–ù–´–ï –î–õ–Ø –ó–ê–ì–†–£–ó–ö–ò:**

### **–ò—Å—Ç–æ—á–Ω–∏–∫:** `restaurants_final_structured_extended.json`
- **–†–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤:** 5 –∑–∞–≤–µ–¥–µ–Ω–∏–π –∏–∑ –ö–∞—à–∞
- **AI –æ–ø–∏—Å–∞–Ω–∏—è:** ~1000 —Å–∏–º–≤–æ–ª–æ–≤ (—Ä–µ–∑—É–ª—å—Ç–∞—Ç —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞)
- **–û—Ç–∑—ã–≤—ã:** ~30 –æ—Ç–∑—ã–≤–æ–≤ –Ω–∞ —Ä–µ—Å—Ç–æ—Ä–∞–Ω (~150 –≤—Å–µ–≥–æ)
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞:** –ü–æ–ª–Ω–∞—è —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏, –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏, –¥–µ—Ç–∞–ª—è–º–∏

### **–ß—Ç–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ entities:**
```json
{
  "google_place_id": "ChIJf9T_x-fbwRQRCVOKzn1MM_Q",
  "entity_type": "restaurant", 
  "title": "Kaya Koruƒüu",
  "location": "POINT(29.6422481 36.1991868)",
  "contacts": {"phone": "+90 532 131 20 57", "website": "..."},
  "details": {"opening_hours": [...], "price_category": "1 000 ‚Ç∫+"},
  "summary_main": "–°—Ä–µ–¥–Ω—è—è –æ—Ü–µ–Ω–∫–∞ ‚Äî 4.7. –í –æ—Ç–∑—ã–≤–∞—Ö —á–∞—Å—Ç–æ —É–ø–æ–º–∏–Ω–∞—é—Ç...",
  "tags": ["–†–µ—Å—Ç–æ—Ä–∞–Ω", "1 000 ‚Ç∫+", "–ª–æ—Å–æ—Å—å", "–æ—Å—å–º–∏–Ω–æ–≥"]
}
```

### **–ß—Ç–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ reviews:**
```json
{
  "entity_id": 1,
  "review_text": "Her≈üeyiyle harika bir ak≈üam ge√ßirdik...",
  "rating": 5,
  "review_date": "2025-08-25",
  "original_language": "tr",
  "review_context": {"–¶–µ–Ω–∞ –Ω–∞ —á–µ–ª–æ–≤–µ–∫–∞": "2 000 ‚Ç∫+"}
}
```

## üéØ **–ö–õ–Æ–ß–ï–í–´–ï –û–°–û–ë–ï–ù–ù–û–°–¢–ò –†–ï–ê–õ–ò–ó–ê–¶–ò–ò:**

### **UPSERT –õ–æ–≥–∏–∫–∞:**
```sql
INSERT INTO entities (...)
VALUES (...)
ON CONFLICT (google_place_id)
DO UPDATE SET
    version = entities.version + 1,
    updated_at = NOW()
RETURNING id;
```

### **–û–±—Ä–∞–±–æ—Ç–∫–∞ –û—Ç–∑—ã–≤–æ–≤:**
1. –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –æ—Ç–∑—ã–≤—ã –¥–ª—è entity_id
2. –í—Å—Ç–∞–≤–ª—è–µ–º —Å–≤–µ–∂–∏–µ –æ—Ç–∑—ã–≤—ã –∏–∑ prepared_reviews
3. –ü–∞—Ä—Å–∏–º –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞—Ç—ã ("3 –¥–Ω—è –Ω–∞–∑–∞–¥" ‚Üí DATE)

### **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¢–µ–≥–æ–≤:**
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏–∑ Google Maps
- –¶–µ–Ω–æ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è  
- –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏–∑ AI –æ–ø–∏—Å–∞–Ω–∏—è
- –£–ø–æ–º–∏–Ω–∞–Ω–∏—è –±–ª—é–¥ –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π

### **Batch –û–±—Ä–∞–±–æ—Ç–∫–∞:**
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ 10 –∑–∞–ø–∏—Å–µ–π –∑–∞ —Ä–∞–∑
- Rollback –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –≤ batch
- –ü–æ–¥—Ä–æ–±–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞–∂–¥–æ–º—É batch

## üîß **–ù–ê–°–¢–†–û–ô–ö–ê –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–Ø:**

### **Supabase PostgreSQL:**
```python
DATABASE_CONFIG = {
    'host': 'aws-0-eu-central-1.pooler.supabase.com',
    'port': '6543', 
    'database': 'postgres',
    'user': 'postgres.pqvdqkcamyutgazskeky',
    'password': 'Kotik_database_2025!'
}
```

### **–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
```bash
pip install psycopg2-binary python-dateutil
```

## üìà **–°–õ–ï–î–£–Æ–©–ò–ï –≠–¢–ê–ü–´:**

### **–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏:**
1. ‚úÖ **–°–æ–∑–¥–∞–Ω–∏–µ —ç–º–±–µ–¥–∏–Ω–≥–æ–≤** —á–µ—Ä–µ–∑ OpenAI API
2. ‚úÖ **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞** (pgvector –∏–ª–∏ Pinecone)
3. ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–≤—è–∑–∏** –º–µ–∂–¥—É —Å—É—â–Ω–æ—Å—Ç—è–º–∏
4. ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram –±–æ—Ç–æ–º**

### **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:**
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–µ–ª–µ–π, beach clubs
- –ó–∞–≥—Ä—É–∑–∫–∞ –≥–∞–π–¥–æ–≤ –ø–æ –ö–∞—à—É
- –°–æ–∑–¥–∞–Ω–∏–µ entity_connections

## üí∞ **–†–ï–°–£–†–°–´ –ò –ö–õ–Æ–ß–ò:**

### **–ì–æ—Ç–æ–≤—ã–µ API –∫–ª—é—á–∏:**
- ‚úÖ Supabase (anon + service_role)
- ‚úÖ OpenAI –¥–ª—è —ç–º–±–µ–¥–∏–Ω–≥–æ–≤
- ‚úÖ Pinecone –¥–ª—è –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –ë–î

### **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- ‚úÖ 5 —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ —Å–∞–º–º–∞—Ä–∏
- ‚úÖ ~150 –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –æ—Ç–∑—ã–≤–æ–≤
- ‚úÖ –ü–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è MVP

---

**üéØ –†–ï–ó–£–õ–¨–¢–ê–¢:** MVP –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –≥–æ—Ç–æ–≤–∞ –∫ –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏—é –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –ø–æ–∏—Å–∫–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π!

*–°–æ–∑–¥–∞–Ω–æ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Claude Sonnet 4*  
*–ü—Ä–∏–Ω—Ü–∏–ø: "–û—Ç –¥–∞–Ω–Ω—ã—Ö –∫ —Ä–∞–±–æ—á–µ–π —Å–∏—Å—Ç–µ–º–µ"*
